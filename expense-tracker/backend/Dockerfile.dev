FROM golang:1.24-alpine

# Install development tools
RUN apk add --no-cache git curl bash

# Install Go tools
RUN go install github.com/cosmtrek/air@latest
RUN go install golang.org/x/tools/gopls@latest
RUN go install github.com/go-delve/delve/cmd/dlv@latest

WORKDIR /workspace

# Copy go mod files
COPY go.mod go.sum ./
RUN go mod download

# Install air for hot reload
COPY . .

# Expose port
EXPOSE 8081

# Keep container running for development
CMD ["sleep", "infinity"]